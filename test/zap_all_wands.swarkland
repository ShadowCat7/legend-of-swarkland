@test
!monster lich player 3 3
wait


!wish wand confusion
  @rng 1 range:4:8:wand_charges
pickup 0000000000000000000000000000000000000000000000000000000000000003
wait
@mark_events
  zap -1 -1 0000000000000000000000000000000000000000000000000000000000000003
    @rng 12 inclusive:6:12:beam_length
    @rng 20 range:100:200:confusion_duration
  @expect_event "a lich king zaps a bone wand."
  @expect_event "a magic beam hits you; you is confused!"
  @expect_event "a magic beam hits a wall."
  @expect_no_events
wait
@mark_events
  zap -1 -1 0000000000000000000000000000000000000000000000000000000000000003
  @expect_event "a lich king zaps a wand of confusion, but a wand of confusion just sputters."
  @expect_event "you is no longer confused."
  @expect_no_events
wait
@mark_events
  zap -1 -1 0000000000000000000000000000000000000000000000000000000000000003
  @expect_event "a lich king tries to zap a wand of confusion, but a wand of confusion disintegrates."
  @expect_no_events
wait


!wish wand digging
  @rng 2 range:4:8:wand_charges
pickup 0000000000000000000000000000000000000000000000000000000000000004
wait
@mark_events
  zap -1 -1 0000000000000000000000000000000000000000000000000000000000000004
    @rng 12 inclusive:6:12:beam_length
  @expect_event "a lich king zaps a gold wand."
  @expect_event "a magic beam hits you."
  # digging doesn't work on border stone
  @expect_event "a magic beam hits a wall."
  @expect_no_events
wait
@mark_events
  zap 1 -1 0000000000000000000000000000000000000000000000000000000000000004
    @rng 12 inclusive:6:12:beam_length
  # the wand is still not identified from hitting a border wall
  @expect_event "a lich king zaps a gold wand."
  @expect_event "a magic beam digs away a wall!"
  @expect_event "a magic beam hits a wall."
  @expect_no_events
wait
@mark_events
  zap -1 -1 0000000000000000000000000000000000000000000000000000000000000004
  @expect_event "a lich king zaps a wand of digging, but a wand of digging just sputters."
  @expect_no_events
wait
@mark_events
  zap -1 -1 0000000000000000000000000000000000000000000000000000000000000004
  @expect_event "a lich king tries to zap a wand of digging, but a wand of digging disintegrates."
  @expect_no_events
wait


!wish wand magic_missile
  @rng 1 range:4:8:wand_charges
pickup 0000000000000000000000000000000000000000000000000000000000000005
wait
@mark_events
  zap -1 -1 0000000000000000000000000000000000000000000000000000000000000005
    @rng 12 inclusive:6:12:beam_length
    @rng 4 range:4:8:magic_missile_damage
  @expect_event "a lich king zaps a plastic wand."
  @expect_event "a magic beam is a magic missile and hits you!"
  @expect_event "a magic beam hits a wall."
  @expect_no_events
wait
@mark_events
  zap -1 -1 0000000000000000000000000000000000000000000000000000000000000005
  @expect_event "a lich king zaps a wand of magic missile, but a wand of magic missile just sputters."
  @expect_no_events
wait
@mark_events
  zap -1 -1 0000000000000000000000000000000000000000000000000000000000000005
  @expect_event "a lich king tries to zap a wand of magic missile, but a wand of magic missile disintegrates."
  @expect_no_events
wait

!wish wand speed
  @rng 1 range:4:8:wand_charges
pickup 0000000000000000000000000000000000000000000000000000000000000006
wait
@mark_events
  zap -1 -1 0000000000000000000000000000000000000000000000000000000000000006
    @rng 12 inclusive:6:12:beam_length
    @rng 20 range:100:200:speed_duration
  @expect_event "a lich king zaps a copper wand."
  @expect_event "a magic beam hits you; you speeds up!"
  @expect_event "a magic beam hits a wall."
  @expect_no_events
wait
@mark_events
  zap -1 -1 0000000000000000000000000000000000000000000000000000000000000006
  @expect_event "a lich king zaps a wand of speed, but a wand of speed just sputters."
  @expect_no_events
# wait for speed to wear off
@mark_events
  wait
  wait
  wait
  @expect_event "you slows back down to normal speed."
  @expect_no_events
@mark_events
  zap -1 -1 0000000000000000000000000000000000000000000000000000000000000006
  @expect_event "a lich king tries to zap a wand of speed, but a wand of speed disintegrates."
  @expect_no_events
wait

!wish wand remedy
  @rng 1 range:4:8:wand_charges
pickup 0000000000000000000000000000000000000000000000000000000000000007
# get poisoned
!wish potion poison
pickup 0000000000000000000000000000000000000000000000000000000000000008
wait
quaff 0000000000000000000000000000000000000000000000000000000000000008
  @rng 600 midpoint:600:poison_expiriration
@mark_events
  zap -1 -1 0000000000000000000000000000000000000000000000000000000000000007
    @rng 12 inclusive:6:12:beam_length
  @expect_event "a lich king zaps a purple wand."
  @expect_event "a magic beam hits you; the magic beam soothes you."
  @expect_event "a magic beam hits a wall."
  @expect_event "you is no longer poisoned."
  @expect_no_events
wait
@mark_events
  zap -1 -1 0000000000000000000000000000000000000000000000000000000000000007
  @expect_event "a lich king zaps a wand of remedy, but a wand of remedy just sputters."
  @expect_no_events
wait
@mark_events
  zap -1 -1 0000000000000000000000000000000000000000000000000000000000000007
  @expect_event "a lich king tries to zap a wand of remedy, but a wand of remedy disintegrates."
  @expect_no_events
